
<!-- saved from url=(0054)https://translate.googleusercontent.com/translate_f#19 -->
<html lang="en" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="google" content="notranslate">
<script>(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
(function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.getStartTickTime=function(){return this.t.start[0]};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=
b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})();}).call(window);
</script><script>_intlStrings._originalText = "Original Russian text:";_intlStrings._interfaceDirection="ltr";_intlStrings._interfaceAlign="left";_intlStrings._langpair="ru|en";_intlStrings._feedbackUrl="https://translate.google.com/translate_suggestion";_intlStrings._currentBy="Current translation on %1$s by %2$s";_intlStrings._unknown="unknown";_intlStrings._suggestTranslation="Contribute a better translation"  ;_intlStrings._submit="Contribute";_intlStrings._suggestThanks="Thank you for contributing your translation suggestion to Google Translate.";_intlStrings._reverse=false;_intlStrings._staticContentPath="https://www.gstatic.com/translate/infowindow/";</script><style type="text/css">.google-src-text {display: none !important} .google-src-active-text {display: block!important;color:black!important; font-size:12px!important;font-family:arial,sans-serif!important}.google-src-active-text a {font-size:12px!important}.google-src-active-text a:link {color:#00c!important;text-decoration:underline!important}.google-src-active-text a:visited {color:purple!important;text-decoration:underline!important}.google-src-active-text a:active {color:red!important;text-decoration:underline!important}</style><meta http-equiv="X-Translated-By" content="Google"><link href="https://translate.googleusercontent.com/wee5.pdf" hreflang="ru" rel="alternate machine-translated-from"><link href="./C ++ Development Fundamentals_ Red Belt_files/css" rel="stylesheet" type="text/css"><!--<base href="" target="_top">--><base href="." target="_top">

<meta name="CreationDate" content="D:20181019135014Z">
<meta name="Creator" content="LaTeX with hyperref package">
<meta name="ModDate" content="D:20181019135014Z">
<meta name="FullBanner" content="This is LuaTeX, Version 1.0.4 (TeX Live 2017)">
<meta name="Producer" content="LuaTeX-1.0.4">
<title>C ++ Development Fundamentals: Red Belt</title>
<link type="text/css" rel="stylesheet" charset="UTF-8" href="./C ++ Development Fundamentals_ Red Belt_files/translateelement.css"><script type="text/javascript" charset="UTF-8" src="./C ++ Development Fundamentals_ Red Belt_files/main.js"></script><script type="text/javascript" charset="UTF-8" src="./C ++ Development Fundamentals_ Red Belt_files/element_main.js"></script></head><body bgcolor="#ffffff" vlink="blue" link="blue" data-new-gr-c-s-check-loaded="14.1039.0" data-gr-ext-installed="">
        <style>
          .spinner-container {
            width:25%;
            top:20px;
            left:50%;
            margin-left:-12.5%;
            border-radius:8px;
            position:fixed;
            text-align:center;
            box-shadow:0 0 10px rgba(0,0,0,0.24);
            background:#fff;
            overflow:hidden;
          }

          .spinner-container p{
            font-family:'Roboto', Arial, sans-serif;
            color:rgba(0,0,0,0.87);
            margin:12px 0 16px 0;
            padding:0;
            font-size:12px;
          }

          .spinner-container img{
            width:22px;
            height:22px;
            margin:16px 0 0;
            padding:0;
          }
        </style>
        <div class="spinner-container notranslate" id="gt-dt-spinner" style="display: none;">
         <img src="./C ++ Development Fundamentals_ Red Belt_files/progress_spinner_color_20dp@2x.gif">
         <p>Translating...</p>
        </div>
      <iframe src="./C ++ Development Fundamentals_ Red Belt_files/translate_un.html" width="0" height="0" frameborder="0" style="width:0px;height:0px;border:0px;display:none;"></iframe>
<table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="1"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 1</font></font></b></a></font></td></tr></tbody></table><font size="4" face="Times"><span style="font-size:28px;font-family:Times">
<div style="position:absolute;top:384;left:110"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ++ </font><b><font style="vertical-align: inherit;">Development Fundamentals </font></b></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Red Belt</font></font></b></nobr></div>
</span></font>
<font size="3" color="#ff0000" face="Times"><span style="font-size:19px;font-family:Times;color:#ff0000">
<div style="position:absolute;top:456;left:414"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Week 5</font></font></nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:23px;font-family:Times">
<div style="position:absolute;top:521;left:202"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Move semantics and basic multithreading</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:1363;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="2"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 2</font></font></b></a></font></td></tr></tbody></table></div><font size="5" face="Times"><span style="font-size:35px;font-family:Times">
<div style="position:absolute;top:1635;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Table of contents</font></font></b></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:1750;left:64"><nobr><b><a href="https://translate.googleusercontent.com/translate_f#4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Move semantics and basic multithreading</font></font></a></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:1749;left:844"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></b></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:1784;left:91"><nobr><a href="https://translate.googleusercontent.com/translate_f#4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1 Move semantics </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:1784;left:845"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:1824;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.1 Moving temporary objects. </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:1824;left:845"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:1864;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#7"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.2 Moving in other situations </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:1864;left:845"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:1903;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.3 The move function </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:1903;left:845"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eight</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:1943;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#12"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.4 When Moving Doesn't Help </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:1943;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eleven</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:1982;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#14"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.5 Copy constructor and assignment operator </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:1982;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2022;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#16"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.6 Move constructor and move assignment operator </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2022;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2062;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#19"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.7 Passing a parameter by value </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2062;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eighteen</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2101;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#19"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.8 Move iterators </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2101;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eighteen</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2141;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#21"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.9 Non-copyable types </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2141;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">twenty</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2180;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#22"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.10 NRVO and copy elision </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2180;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2220;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#23"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.11 Dangers of return </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2220;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2256;left:91"><nobr><a href="https://translate.googleusercontent.com/translate_f#24"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2 Basic multithreading </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2256;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2295;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#24"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.1 async and future </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2295;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23</font></font></nobr></div>
<div style="position:absolute;top:2370;left:455"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:2551;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="3"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 3</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2641;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2699;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#25"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.2 The task of generating and summing a matrix </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2699;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2739;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#27"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.3 Features of the future template </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2739;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2778;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#28"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.4 Race condition </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2778;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2818;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#30"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.5 mutex and lock_guard </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2818;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">29</font></font></nobr></div>
</span></font>
<font size="3" color="#3b98db" face="Times"><span style="font-size:15px;font-family:Times;color:#3b98db">
<div style="position:absolute;top:2857;left:132"><nobr><a href="https://translate.googleusercontent.com/translate_f#32"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.6 &lt;execution&gt;, which does not exist </font></font></a><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">...</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:2857;left:836"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31</font></font></nobr></div>
<div style="position:absolute;top:3558;left:455"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:3739;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="4"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 4</font></font></b></a></font></td></tr></tbody></table></div><font size="5" face="Times"><span style="font-size:35px;font-family:Times">
<div style="position:absolute;top:4014;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Move semantics and basic</font></font></b></nobr></div>
<div style="position:absolute;top:4056;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">multithreading</font></font></b></nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:23px;font-family:Times">
<div style="position:absolute;top:4123;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1. </font><font style="vertical-align: inherit;">Move semantics</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:4178;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.1. </font><font style="vertical-align: inherit;">Moving temporary objects.</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:4224;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's consider the problem. </font><font style="vertical-align: inherit;">Let's have a function that returns a heavy string:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:4256;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MakeString () {</font></font></font></nobr></div>
<div style="position:absolute;top:4276;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(100000000, </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'a' </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">);</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:4297;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:4343;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suppose it is necessary to add this line to some vector of lines.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:4375;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
<div style="position:absolute;top:4395;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
<div style="position:absolute;top:4415;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">heavy_string = MakeString ();</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:4436;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back (heavy_string);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:4476;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:4497;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:4543;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We want to put the result of calling the MakeString () function into a vector. </font><font style="vertical-align: inherit;">This can be done without</font></font></nobr></div>
<div style="position:absolute;top:4564;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">using the variable heavy_string.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:4596;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
<div style="position:absolute;top:4616;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:4637;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back (MakeString ());</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:4677;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:4698;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:4746;left:455"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:4927;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="5"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 5</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:5017;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:5075;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's measure the running time of each implementation using the LOG_DURATION macro.</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:5104;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// with variable: 299 ms</font></font></nobr></div>
<div style="position:absolute;top:5125;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// without variable: 168 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:5168;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second option is faster because the temporary object is the result of a function call -</font></font></nobr></div>
<div style="position:absolute;top:5190;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is not saved to a variable.</font></font></nobr></div>
<div style="position:absolute;top:5229;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let us investigate the speed of operation of algorithms in which a temporary object is added to the vector,</font></font></nobr></div>
<div style="position:absolute;top:5251;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">created with the string constructor.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:5280;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
<div style="position:absolute;top:5301;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">heavy_string =</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(100000000, </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'a' </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">);</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:5321;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back ();</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:5362;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:5382;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (100000000, </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'a'</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ));</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:5423;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// ctor: with variable: 201 ms</font></font></nobr></div>
<div style="position:absolute;top:5443;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// ctor: without variable: 122 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:5486;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code runs faster without using an intermediate variable. </font><font style="vertical-align: inherit;">In the second option, in</font></font></nobr></div>
<div style="position:absolute;top:5510;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">push_back is a temporary object, it picks up the data of this object without copying. </font><font style="vertical-align: inherit;">By-</font></font></nobr></div>
<div style="position:absolute;top:5530;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's take a closer look at how it works.</font></font></nobr></div>
<div style="position:absolute;top:5569;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consider the process of adding a variable to a vector. </font><font style="vertical-align: inherit;">Let's remember how vector data is stored</font></font></nobr></div>
<div style="position:absolute;top:5591;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and strings in memory.</font></font></nobr></div>
<div style="position:absolute;top:5867;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The local variable strings, which is a vector, and the local variable str, which is</font></font></nobr></div>
<div style="position:absolute;top:5889;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings are stored on the stack. </font><font style="vertical-align: inherit;">A vector is represented by a pointer to its data in the heap and a length.</font></font></nobr></div>
<div style="position:absolute;top:5934;left:455"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:6115;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="6"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 6</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:6205;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:6263;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition, there is a local variable with a string that is a pointer to</font></font></nobr></div>
<div style="position:absolute;top:6285;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">heap data and length. </font><font style="vertical-align: inherit;">A vector stores strings in a heap in a row, where each string is a pointer</font></font></nobr></div>
<div style="position:absolute;top:6306;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to your data and length.</font></font></nobr></div>
<div style="position:absolute;top:6347;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">push_back called from a local variable should copy the data of that row.</font></font></nobr></div>
<div style="position:absolute;top:6643;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allocate memory for eight symbols, put a pointer to them in the vector.</font></font></nobr></div>
<div style="position:absolute;top:6683;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we want to add a temporary object to the vector, then its data in the heap, on which it</font></font></nobr></div>
<div style="position:absolute;top:6704;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">referred to, will not be needed by anyone. </font><font style="vertical-align: inherit;">If no one takes them, they will simply be destroyed,</font></font></nobr></div>
<div style="position:absolute;top:6726;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">because the object is temporary.</font></font></nobr></div>
<div style="position:absolute;top:7035;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">push_back has the right not to copy this data, but simply its own pointer, which will be added</font></font></nobr></div>
<div style="position:absolute;top:7055;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">into the vector data, direct to this data, and the same local timeline has these</font></font></nobr></div>
<div style="position:absolute;top:7077;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">select data.</font></font></nobr></div>
<div style="position:absolute;top:7122;left:455"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:7303;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="7"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 7</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:7393;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:7696;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.2. </font><font style="vertical-align: inherit;">Moving in other situations</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:7742;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's analyze another class of situations when we do not copy the data of the temporary</font></font></nobr></div>
<div style="position:absolute;top:7763;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">object. </font><font style="vertical-align: inherit;">In C ++, wherever copying can occur, there is also movement.</font></font></nobr></div>
<div style="position:absolute;top:7785;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's remember where copying of objects can take place. </font><font style="vertical-align: inherit;">The simplest case is the assignment</font></font></nobr></div>
<div style="position:absolute;top:7807;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ivanie.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:7838;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">target_string = </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"old_value" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
<div style="position:absolute;top:7859;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source_string = MakeString ();</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:7879;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">target_string = source_string;</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:7925;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this case, copying will take place here. </font><font style="vertical-align: inherit;">Here, too, you can remove the intermediate</font></font></nobr></div>
<div style="position:absolute;top:7947;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">variable source_string and save copying resources.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:7978;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">target_string = </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"old_value" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:7999;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">target_string = MakeString ();</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:8045;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's measure the running time of the program with assignment to an intermediate variable and without</font></font></nobr></div>
<div style="position:absolute;top:8067;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">intermediate variable.</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:8098;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// assignment, with variable: 243 ms</font></font></nobr></div>
<div style="position:absolute;top:8119;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// assignment, without variable: 119 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:8165;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By using the set :: insert method, you can also do without the intermediate variable.</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:8197;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// set :: insert, with variable</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:8217;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
<div style="position:absolute;top:8237;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">heavy_string = MakeString ();</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:8257;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.insert (heavy_string);</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:8310;left:455"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:8491;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="8"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 8</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:8581;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:8641;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// set :: insert, without variable</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:8662;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:8682;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.insert (MakeString ());</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:8723;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// set :: insert, with variable: 217 ms</font></font></nobr></div>
<div style="position:absolute;top:8743;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// set :: insert, without variable: 100 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:8789;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now let's look at an example with a dictionary. </font><font style="vertical-align: inherit;">We create an intermediate variable for both the key and</font></font></nobr></div>
<div style="position:absolute;top:8810;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for the value.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:8842;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">map </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
<div style="position:absolute;top:8862;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">key = MakeString ();</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:8882;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings value = MakeString ();</font></font></nobr></div>
<div style="position:absolute;top:8903;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings [key] = value;</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:8923;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// map :: operator [], with variables: 474 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:8969;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's get rid of the intermediate variable for the value.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:9000;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">map </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
<div style="position:absolute;top:9020;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">key = MakeString ();</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:9040;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings [key] = MakeString ();</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:9061;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// map :: operator [], with variable for key: 305 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:9106;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now let's get rid of the intermediate variable for the key.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:9138;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">map </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:9158;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings [MakeString ()] = MakeString ();</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:9178;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// map :: operator [], without variables: 210 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:9224;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's write a MakeVector () function that creates a vector, and try this vector somewhere</font></font></nobr></div>
<div style="position:absolute;top:9245;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">put.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:9277;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; MakeVector () {</font></font></font></nobr></div>
<div style="position:absolute;top:9297;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; (100000000, 0);</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:9317;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:9363;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's try to put such a vector into a set.</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:9394;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// set :: insert for vector, with variable</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:9415;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; vectors;</font></font></font></nobr></div>
<div style="position:absolute;top:9435;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; heavy_vector = MakeVector ();</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:9455;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vectors.insert (heavy_vector);</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:9498;left:455"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:9679;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="9"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 9</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:9769;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:9850;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// set :: insert for vector, without variable</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:9870;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; vectors;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:9890;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vectors.insert (MakeVector ());</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:9931;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// set :: insert for vector, with variable: 1062 ms</font></font></nobr></div>
<div style="position:absolute;top:9951;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// set :: insert for vector, without variable: 386 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:9998;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you have some temporary object, try not to lose this important property -</font></font></nobr></div>
<div style="position:absolute;top:10019;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">temporality. </font><font style="vertical-align: inherit;">This saves the compiler on copying.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:10104;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.3. </font><font style="vertical-align: inherit;">Move function</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:10150;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are situations when there is a non-temporary object, but it is known about it that where it is created, it</font></font></nobr></div>
<div style="position:absolute;top:10172;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will no longer be needed.</font></font></nobr></div>
<div style="position:absolute;top:10211;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is a task - to read a set of lines from the input stream and put these lines into a vector. </font><font style="vertical-align: inherit;">It does</font></font></nobr></div>
<div style="position:absolute;top:10233;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReadStrings () function.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:10265;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; ReadStrings (istream &amp; stream) {</font></font></font></nobr></div>
<div style="position:absolute;top:10285;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
<div style="position:absolute;top:10305;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s;</font></font></font></nobr></div>
<div style="position:absolute;top:10326;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(stream &gt;&gt; s) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:10346;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back (s);</font></font></nobr></div>
<div style="position:absolute;top:10366;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:10387;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:10407;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:10453;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After we put the line s into the vector, we no longer need it. </font><font style="vertical-align: inherit;">I would like to</font></font></nobr></div>
<div style="position:absolute;top:10475;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the push_back method would behave like a temporary object in this case. </font><font style="vertical-align: inherit;">We want to change</font></font></nobr></div>
<div style="position:absolute;top:10496;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the semantics of the object.</font></font></nobr></div>
<div style="position:absolute;top:10536;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is a move function that can change the semantics of even a persistent object. </font><font style="vertical-align: inherit;">To use</font></font></nobr></div>
<div style="position:absolute;top:10558;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to use the move function, you need to connect the utility module. </font><font style="vertical-align: inherit;">The loop now looks like this:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:10589;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(stream &gt;&gt; s) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:10610;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back (move (s));</font></font></nobr></div>
<div style="position:absolute;top:10630;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:10686;left:455"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eight</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:10867;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="10"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 10</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:10957;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:11015;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's check the function:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:11045;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
<div style="position:absolute;top:11065;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> const string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp; s: ReadStrings (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cin </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)) {</font></font></font></nobr></div>
<div style="position:absolute;top:11085;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; s &lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"\ n" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11106;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:11126;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11146;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:11167;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// input: Red belt C ++</font></font></nobr></div>
<div style="position:absolute;top:11187;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// output:</font></font></nobr></div>
<div style="position:absolute;top:11207;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Red</font></font></nobr></div>
<div style="position:absolute;top:11228;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// belt</font></font></nobr></div>
<div style="position:absolute;top:11248;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// C ++</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:11292;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The difference between implementations with and without move can be determined not only by the code running time,</font></font></nobr></div>
<div style="position:absolute;top:11314;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">but also by the content of the variable s. </font><font style="vertical-align: inherit;">Let's see what is in the s variable before push_back and after</font></font></nobr></div>
<div style="position:absolute;top:11335;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">him. </font><font style="vertical-align: inherit;">Let's also see what lies at the end of the vector.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:11365;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(stream &gt;&gt; s) {</font></font></font></nobr></div>
<div style="position:absolute;top:11385;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"s =" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; s &lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"\ n" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11406;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back (s);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:11426;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"s =" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; s &lt;&lt;</font></font></font></nobr></div>
</span></font>
<font size="3" color="#9400d1" face="Times"><span style="font-size:14px;font-family:Times;color:#9400d1">
<div style="position:absolute;top:11446;left:123"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">", strings.back () =" </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; strings.back () &lt;&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "\ n" </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:11467;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:11487;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// input: abc</font></font></nobr></div>
<div style="position:absolute;top:11507;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// output:</font></font></nobr></div>
<div style="position:absolute;top:11528;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// s = a</font></font></nobr></div>
<div style="position:absolute;top:11548;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// s = a, strings.back () = a</font></font></nobr></div>
<div style="position:absolute;top:11568;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// s = b</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:11612;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The letter a was copied. </font><font style="vertical-align: inherit;">If we add a move call to the push_back method:</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:11642;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// input: abc</font></font></nobr></div>
<div style="position:absolute;top:11662;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// output:</font></font></nobr></div>
<div style="position:absolute;top:11683;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// s = a</font></font></nobr></div>
<div style="position:absolute;top:11703;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// s =, strings.back () = a</font></font></nobr></div>
<div style="position:absolute;top:11723;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// s = b</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:11767;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The push_back method fetched data from string s.</font></font></nobr></div>
<div style="position:absolute;top:11807;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's show that the code is speeding up. </font><font style="vertical-align: inherit;">To do this, we will write a function that knows how to move, so</font></font></nobr></div>
<div style="position:absolute;top:11829;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and do not move.</font></font></nobr></div>
<div style="position:absolute;top:11874;left:455"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nine</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:12055;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="11"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 11</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:12145;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:12205;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; ReadStrings (istream &amp; stream,</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bool </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">use_move) {</font></font></font></nobr></div>
<div style="position:absolute;top:12226;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
<div style="position:absolute;top:12246;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s;</font></font></font></nobr></div>
<div style="position:absolute;top:12266;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(stream &gt;&gt; s) {</font></font></font></nobr></div>
<div style="position:absolute;top:12287;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(use_move) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:12307;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back (move (s));</font></font></nobr></div>
<div style="position:absolute;top:12327;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">} </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">else</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></nobr></div>
<div style="position:absolute;top:12348;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back (s);</font></font></nobr></div>
<div style="position:absolute;top:12368;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:12388;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:12409;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:12429;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:12475;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's use the GenerateText () function. </font><font style="vertical-align: inherit;">It generates text from billions of characters and</font></font></nobr></div>
<div style="position:absolute;top:12497;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beats it with spaces every ten million characters.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:12529;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
<div style="position:absolute;top:12549;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">text = GenerateText ();</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:12569;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{LOG_DURATION ( </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"without move"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
<div style="position:absolute;top:12590;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">istringstream stream (text);</font></font></nobr></div>
<div style="position:absolute;top:12610;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReadStrings (stream, </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
<div style="position:absolute;top:12630;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:12651;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{LOG_DURATION ( </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"with move"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
<div style="position:absolute;top:12671;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">istringstream stream (text);</font></font></nobr></div>
<div style="position:absolute;top:12691;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReadStrings (stream, </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
<div style="position:absolute;top:12711;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:12732;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:12752;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// without move: 26359 ms</font></font></nobr></div>
<div style="position:absolute;top:12772;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// with move: 17586 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:12819;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We got a significant acceleration due to getting rid of unnecessary copying.</font></font></nobr></div>
<div style="position:absolute;top:12858;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The move function is not limited to this example. </font><font style="vertical-align: inherit;">There are situations when</font></font></nobr></div>
<div style="position:absolute;top:12880;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the result of calling the word splitting function must live longer than the original string.</font></font></nobr></div>
<div style="position:absolute;top:12902;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consider the following implementation of the SplitIntoWords function:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:12933;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; SplitIntoWords (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> const string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp; text) {</font></font></font></nobr></div>
<div style="position:absolute;top:12954;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; words;</font></font></font></nobr></div>
<div style="position:absolute;top:12974;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">current_word;</font></font></font></nobr></div>
<div style="position:absolute;top:12994;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> const char </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c: text) {</font></font></font></nobr></div>
<div style="position:absolute;top:13015;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(c == </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'' </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:13062;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ten</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:13243;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="12"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 12</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:13333;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:13393;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">words.push_back (current_word);</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:13393;left:438"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// call push_back from the variable that we</font></font></nobr></div>
<div style="position:absolute;top:13414;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// no longer needed</font></font></nobr></div>
<div style="position:absolute;top:13434;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// it would be logical to wrap it in move</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:13454;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">current_word.clear ();</font></font></nobr></div>
<div style="position:absolute;top:13475;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">} </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">else</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> {</font></font></nobr></div>
<div style="position:absolute;top:13495;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">current_word.push_back (c);</font></font></nobr></div>
<div style="position:absolute;top:13515;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:13536;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:13556;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">words.push_back (current_word);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:13576;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">words;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:13597;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:13686;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.4. </font><font style="vertical-align: inherit;">When Relocation Doesn't Help</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:13732;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the object has no data on the heap, and the main data on the stack, then the data will have to be copied.</font></font></nobr></div>
<div style="position:absolute;top:13754;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An array stores its data on the stack. </font><font style="vertical-align: inherit;">Let us demonstrate by his example that displacement is not</font></font></nobr></div>
<div style="position:absolute;top:13775;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">helps to speed up work with it.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:13806;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SIZE = 10000;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:13846;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array &lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , SIZE&gt; MakeArray () {</font></font></nobr></div>
<div style="position:absolute;top:13867;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">array &lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , SIZE&gt; a;</font></font></nobr></div>
<div style="position:absolute;top:13887;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a.fill (8);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:13907;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:13928;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:13972;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's create a vector of arrays and put the array into the vector ten thousand times using the pro</font></font></nobr></div>
<div style="position:absolute;top:13994;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">an intermediate variable and without using an intermediate variable.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:14024;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:14045;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{LOG_DURATION ( </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"with variable"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:14065;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;array &lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, SIZE &gt;&gt; arrays;</font></font></font></nobr></div>
<div style="position:absolute;top:14085;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i = 0; i &lt;10000; ++ i) {</font></font></font></nobr></div>
<div style="position:absolute;top:14106;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">heavy_array = MakeArray ():</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:14126;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arrays.push_back (heavy_array);</font></font></nobr></div>
<div style="position:absolute;top:14146;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:14167;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:14187;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{LOG_DURATION ( </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"without variable"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:14207;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;array &lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, SIZE &gt;&gt; arrays;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:14250;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eleven</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:14431;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="13"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 13</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:14521;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:14581;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i = 0; i &lt;10000; ++ i) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:14602;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arrays.push_back (MakeArray ());</font></font></nobr></div>
<div style="position:absolute;top:14622;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:14642;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:14683;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:14703;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:14724;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// with variable: 1191 ms</font></font></nobr></div>
<div style="position:absolute;top:14744;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// without variable: 1148 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:14790;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No acceleration occurred. </font><font style="vertical-align: inherit;">Let's look at another example.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:14822;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MakeString () {</font></font></font></nobr></div>
<div style="position:absolute;top:14842;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"C ++" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:14863;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:14903;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
<div style="position:absolute;top:14924;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; strings;</font></font></font></nobr></div>
<div style="position:absolute;top:14944;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s = MakeString ();</font></font></font></nobr></div>
<div style="position:absolute;top:14964;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; s &lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"\ n" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:14985;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back (s);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:15005;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; s &lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"\ n" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
<div style="position:absolute;top:15046;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:15066;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:15086;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// C ++</font></font></nobr></div>
<div style="position:absolute;top:15106;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// C ++</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:15153;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now let's make the variable s constant:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:15184;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s = MakeString ();</font></font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:15225;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// C ++</font></font></nobr></div>
<div style="position:absolute;top:15245;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// C ++</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:15291;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's wrap line s in move:</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:15323;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strings.push_back (move (s));</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:15364;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// C ++</font></font></nobr></div>
<div style="position:absolute;top:15384;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// C ++</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:15438;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:15619;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="14"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 14</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:15709;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:15767;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The line did not move. </font><font style="vertical-align: inherit;">The string is constant, moving from it will not work.</font></font></nobr></div>
<div style="position:absolute;top:15807;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calling move on a constant object is useless. </font><font style="vertical-align: inherit;">Keep track of the constancy of the moved</font></font></nobr></div>
<div style="position:absolute;top:15828;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">object.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:15912;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.5. </font><font style="vertical-align: inherit;">Copy constructor and assignment operator</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:15958;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's discuss what happens in the following situations:</font></font></nobr></div>
<div style="position:absolute;top:16137;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why is it necessary:</font></font></nobr></div>
<div style="position:absolute;top:16185;left:91"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• Learn to move your own classes;</font></font></nobr></div>
<div style="position:absolute;top:16220;left:91"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• Talk with developers in the same language;</font></font></nobr></div>
<div style="position:absolute;top:16254;left:91"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• Read the documentation and understand where the movement might occur;</font></font></nobr></div>
<div style="position:absolute;top:16288;left:91"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• Develop intuition regarding move semantics.</font></font></nobr></div>
<div style="position:absolute;top:16336;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the following cases, the copy constructor is called:</font></font></nobr></div>
<div style="position:absolute;top:16474;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the following cases, the copy assignment operator is invoked:</font></font></nobr></div>
<div style="position:absolute;top:16626;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:16807;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="15"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 15</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:16897;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:16955;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's take a closer look at these methods using the example of the Logger class, which will log</font></font></nobr></div>
<div style="position:absolute;top:16977;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calls to these methods.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:17008;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger {</font></font></font></nobr></div>
<div style="position:absolute;top:17028;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">public </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17049;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger () { </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt;&lt; </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Default ctor \ n"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:17049;left:477"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// default constructor</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17069;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Logger &amp;) { </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt;&lt; </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Copy ctor"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:17069;left:556"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// copy constructor</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:17089;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void operator </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> const </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger &amp;) {</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Copy assignment \ n" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">}</font></font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:17089;left:713"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// operator</font></font></nobr></div>
<div style="position:absolute;top:17110;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// assignments</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17130;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">};</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:17171;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17191;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger source;</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:17191;left:241"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// default constructor is called</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17211;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger target = source;</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:17211;left:330"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// the copy constructor is called</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:17252;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17272;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:17293;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Default ctor</font></font></nobr></div>
<div style="position:absolute;top:17313;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Copy ctor</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:17354;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;Logger&gt; loggers;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17374;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loggers.push_back (target);</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:17394;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Copy ctor</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17435;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source = target;</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:17435;left:241"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// the assignment operator is called</font></font></nobr></div>
<div style="position:absolute;top:17455;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Copy assignment</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:17501;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For native types, if necessary, the compiler itself generates a copy constructor.</font></font></nobr></div>
<div style="position:absolute;top:17522;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and the assignment operator, which simply copy all fields.</font></font></nobr></div>
<div style="position:absolute;top:17562;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For types that manage memory on their own, you need to independently implement</font></font></nobr></div>
<div style="position:absolute;top:17584;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copying and assignment.</font></font></nobr></div>
<div style="position:absolute;top:17623;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's write a copy constructor for the SimpleVector class.</font></font></nobr></div>
<div style="position:absolute;top:17663;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's add a constructor from a constant reference to SimpleVector.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:17694;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleVector ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SimpleVector &amp; other);</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:17740;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's implement this constructor:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:17771;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">template </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> typename </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T&gt;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:17814;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fourteen</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:17995;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="16"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 16</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:18085;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:18145;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleVector &lt;T&gt; :: SimpleVector ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SimpleVector &lt;T&gt; &amp; other)</font></font></nobr></div>
<div style="position:absolute;top:18166;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: data ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">new</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> T [other.capacity]),</font></font></nobr></div>
<div style="position:absolute;top:18186;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size (other.size),</font></font></nobr></div>
<div style="position:absolute;top:18206;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capacity (other.capacity)</font></font></nobr></div>
<div style="position:absolute;top:18227;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{</font></font></nobr></div>
<div style="position:absolute;top:18247;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy (other.begin (). other.end (), begin ());</font></font></nobr></div>
<div style="position:absolute;top:18267;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:18359;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.6. </font><font style="vertical-align: inherit;">Move constructor and move operator assign-</font></font></b></nobr></div>
<div style="position:absolute;top:18386;left:132"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ivania</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:18432;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the following cases, the move constructor is called:</font></font></nobr></div>
<div style="position:absolute;top:18643;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the following case, initialization with a temporary object is optimized without calling the constructor.</font></font></nobr></div>
<div style="position:absolute;top:18664;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">torus of displacement. </font><font style="vertical-align: inherit;">This is a special case and will be discussed later.</font></font></nobr></div>
<div style="position:absolute;top:18815;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the following cases, the move assignment operator is invoked.</font></font></nobr></div>
<div style="position:absolute;top:18837;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">operator):</font></font></nobr></div>
<div style="position:absolute;top:19002;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:19183;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="17"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 17</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:19273;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:19331;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you have your own class with a copy constructor but no variable constructor</font></font></nobr></div>
<div style="position:absolute;top:19353;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The compiler makes the move equivalent to copying. </font><font style="vertical-align: inherit;">Consider an example with</font></font></nobr></div>
<div style="position:absolute;top:19374;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with the SimpleVector class. </font><font style="vertical-align: inherit;">Let's tell the compiler to generate the re-</font></font></nobr></div>
<div style="position:absolute;top:19396;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">premises.</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:19426;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// rvalue reference</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:19447;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleVector ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SimpleVector &amp;&amp; other) = </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">default</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:19493;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rvalue reference behaves like a regular reference, but allows temporary</font></font></nobr></div>
<div style="position:absolute;top:19513;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">objects.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:19543;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:19563;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleVector &lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; source (1);</font></font></nobr></div>
<div style="position:absolute;top:19583;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleVector &lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; target = move (source);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:19604;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; source.Size () &lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; target.Size () &lt;&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> endl </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
<div style="position:absolute;top:19624;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:19644;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:19665;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// eleven</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:19709;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Such code crashes at the end, on destructors. </font><font style="vertical-align: inherit;">You will have to independently implement the design</font></font></nobr></div>
<div style="position:absolute;top:19731;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">torus of displacement.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:19761;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">template </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> typename </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T&gt;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:19781;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleVector &lt;T&gt; :: SimpleVector (SimpleVector &lt;T&gt; &amp;&amp; other)</font></font></nobr></div>
<div style="position:absolute;top:19802;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: data (other.data),</font></font></nobr></div>
<div style="position:absolute;top:19822;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size (other.size),</font></font></nobr></div>
<div style="position:absolute;top:19842;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capacity (other.capacity)</font></font></nobr></div>
<div style="position:absolute;top:19863;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{</font></font></nobr></div>
<div style="position:absolute;top:19883;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">other.data = nullptr;</font></font></nobr></div>
<div style="position:absolute;top:19903;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">other.size = other.capacity = 0;</font></font></nobr></div>
<div style="position:absolute;top:19924;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:19964;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 0 1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:20009;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now the object we moved from has a size of 0, and the object we moved to has</font></font></nobr></div>
<div style="position:absolute;top:20030;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size 1.</font></font></nobr></div>
<div style="position:absolute;top:20070;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's implement the move assignment operator.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:20100;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void operator </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= (SimpleVector &amp;&amp; other);</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:20145;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It will be implemented somewhat like a move constructor.</font></font></nobr></div>
<div style="position:absolute;top:20190;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:20371;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="18"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 18</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:20461;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:20521;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">template </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> typename </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T&gt;</font></font></font></nobr></div>
<div style="position:absolute;top:20542;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleVector &lt;T&gt; ::</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> operator </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= (SimpleVector &lt;T&gt; &amp;&amp; other) {</font></font></font></nobr></div>
<div style="position:absolute;top:20562;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delete </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[] data;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:20582;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">data = other.data;</font></font></nobr></div>
<div style="position:absolute;top:20603;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size = other.size;</font></font></nobr></div>
<div style="position:absolute;top:20623;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">capacity = other.capacity;</font></font></nobr></div>
<div style="position:absolute;top:20664;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">other.data = nullptr;</font></font></nobr></div>
<div style="position:absolute;top:20684;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">other.size = other.capacity = 0;</font></font></nobr></div>
<div style="position:absolute;top:20704;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:20751;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's check the move constructor.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:20782;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:20803;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleVector &lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; source (1);</font></font></nobr></div>
<div style="position:absolute;top:20823;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SimpleVector &lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; target (1);</font></font></nobr></div>
<div style="position:absolute;top:20843;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">target = move (source);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:20864;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; source.Size () &lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; target.Size () &lt;&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> endl </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
<div style="position:absolute;top:20884;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:20904;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:20925;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 0 1</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:20971;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rvalue overloading is a way to distinguish between temporary and permanent objects.</font></font></nobr></div>
<div style="position:absolute;top:21187;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If necessary, the compiler itself generates a move constructor and a move operator.</font></font></nobr></div>
<div style="position:absolute;top:21209;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">assignments that simply move all fields. </font><font style="vertical-align: inherit;">If the class does not manage memory</font></font></nobr></div>
<div style="position:absolute;top:21231;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on its own, then moving will just work for him.</font></font></nobr></div>
<div style="position:absolute;top:21378;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:21559;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="19"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 19</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:21649;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:21705;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.7. </font><font style="vertical-align: inherit;">Passing a parameter by value</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:21751;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We optimize the ChangeFirstName and ChangeLastName methods from the Person class, which implements</font></font></nobr></div>
<div style="position:absolute;top:21773;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">got out in the Names and Surnames-4 problem</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:21802;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeFirstName (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">year,</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> const string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp; first_name) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:21822;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first_names [year] = first_name;</font></font></nobr></div>
<div style="position:absolute;top:21843;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:21863;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeLastName (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">year,</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> const string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp; last_name) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:21883;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">last_names [year] = last_name;</font></font></nobr></div>
<div style="position:absolute;top:21904;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:21947;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You must accept strings by value, not by reference. </font><font style="vertical-align: inherit;">Inside the function we will move</font></font></nobr></div>
<div style="position:absolute;top:21969;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a string inside the dictionary.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:21998;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeFirstName (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">year,</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first_name) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:22018;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first_names [year] = move (first_name);</font></font></nobr></div>
<div style="position:absolute;top:22038;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:22059;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ChangeLastName (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">year,</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">last_name) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:22079;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">last_names [year] = move (last_name);</font></font></nobr></div>
<div style="position:absolute;top:22099;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:22143;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are two possible cases. </font><font style="vertical-align: inherit;">If we call ChangeFirstName from a temporary object, then it will</font></font></nobr></div>
<div style="position:absolute;top:22164;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initializes the variable first_name, since the object is temporary, then it will call -</font></font></nobr></div>
<div style="position:absolute;top:22186;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Xia move constructor. </font><font style="vertical-align: inherit;">Then we'll call the move again, move the first_name</font></font></nobr></div>
<div style="position:absolute;top:22208;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inside the container. </font><font style="vertical-align: inherit;">There will be two movements.</font></font></nobr></div>
<div style="position:absolute;top:22247;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we call this method from a non-temporary object, then this object will be copied to the argument</font></font></nobr></div>
<div style="position:absolute;top:22269;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ment of the function, then there will be a movement of this object inside the container.</font></font></nobr></div>
<div style="position:absolute;top:22308;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, taking a function parameter by value, we can make it universal, call</font></font></nobr></div>
<div style="position:absolute;top:22330;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">both from temporary objects and from permanent ones.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:22413;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.8. </font><font style="vertical-align: inherit;">Move iterators</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:22459;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's look at a construction that makes the use of move semantics simpler.</font></font></nobr></div>
<div style="position:absolute;top:22499;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consider the SplitIntoSentences task, in which it was necessary to write a function that accepts</font></font></nobr></div>
<div style="position:absolute;top:22521;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">generating a set of tokens, breaking them into sentences. </font><font style="vertical-align: inherit;">Consider the SplitIntoSentences function itself:</font></font></nobr></div>
<div style="position:absolute;top:22566;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eighteen</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:22747;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="20"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 20</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:22837;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:22897;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">template </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> typename </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Token&gt;</font></font></font></nobr></div>
<div style="position:absolute;top:22918;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;Sentence &lt;Token&gt;&gt; SplitIntoSentences (</font></font></font></nobr></div>
<div style="position:absolute;top:22938;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;Token&gt;&gt; tokens) {</font></font></font></nobr></div>
<div style="position:absolute;top:22958;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;Sentence &lt;Token&gt;&gt; sentences;</font></font></font></nobr></div>
<div style="position:absolute;top:22979;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tokens_begin = begin (tokens);</font></font></font></nobr></div>
<div style="position:absolute;top:22999;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(tokens_begin! = tokens_end) {</font></font></font></nobr></div>
<div style="position:absolute;top:23019;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sentence_end =</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:23040;left:143"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FindSentenceEnd (tokens_begin, tokens_end);</font></font></nobr></div>
<div style="position:absolute;top:23060;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sentence &lt;Token&gt; sentence;</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:23080;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(; tokens_begin! = sentence_end; ++ tokens_begin) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:23101;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sentence.push_back (move (∗ tokens_begin));</font></font></nobr></div>
<div style="position:absolute;top:23121;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:23141;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sentences.push_back (move (sentence));</font></font></nobr></div>
<div style="position:absolute;top:23162;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:23182;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sentences;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:23202;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:23248;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In it, we start the tokens_begin iterator and use this iterator over tokens, we find</font></font></nobr></div>
<div style="position:absolute;top:23270;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">not the next sentence. </font><font style="vertical-align: inherit;">We take the current token, we go as an iterator from the current token to</font></font></nobr></div>
<div style="position:absolute;top:23292;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">end of the sentence, we insert all these tokens into the current sentence. </font><font style="vertical-align: inherit;">Then this sentence</font></font></nobr></div>
<div style="position:absolute;top:23313;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">we insert into the vector of sentences.</font></font></nobr></div>
<div style="position:absolute;top:23353;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's take a look at how the for loop works. </font><font style="vertical-align: inherit;">It iterates over tokens in their range, each one inserts</font></font></nobr></div>
<div style="position:absolute;top:23375;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">into vector.</font></font></nobr></div>
<div style="position:absolute;top:23414;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's include the iterator module. </font><font style="vertical-align: inherit;">After that, a special function will become available, which we</font></font></nobr></div>
<div style="position:absolute;top:23436;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">call from iterators. </font><font style="vertical-align: inherit;">It's called make_move_iterator. </font><font style="vertical-align: inherit;">Such a function returns a wrapper</font></font></nobr></div>
<div style="position:absolute;top:23458;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ku above the iterator, which, if we want to copy the object, moves it. </font><font style="vertical-align: inherit;">Function</font></font></nobr></div>
<div style="position:absolute;top:23481;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_move_iterator changes the semantics of the iterator so that when accessing it, the data is</font></font></nobr></div>
<div style="position:absolute;top:23501;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">would be compiled, not copied.</font></font></nobr></div>
<div style="position:absolute;top:23541;left:64"><nobr><font style="vertical-align: inherit;"><font class="" style="vertical-align: inherit;">Using make_move_iterator, we can replace this piece ...</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:23572;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sentence &lt;Token&gt; sentence;</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:23593;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(; tokens_begin! = sentence_end; ++ tokens_begin) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:23613;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sentence.push_back (move (∗ tokens_begin));</font></font></nobr></div>
<div style="position:absolute;top:23633;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:23654;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sentences.push_back (move (sentence));</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:23700;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... to this:</font></font></nobr></div>
<div style="position:absolute;top:23754;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:23935;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="21"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 21</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:24025;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24085;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sentences.push_back (Sentence &lt;Token&gt; (</font></font></nobr></div>
<div style="position:absolute;top:24106;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_move_iterator (tokens_begin),</font></font></nobr></div>
<div style="position:absolute;top:24126;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_move_iterator (sentence_end)</font></font></nobr></div>
<div style="position:absolute;top:24146;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">));</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:24193;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It remains to change the tokens_begin iterator at the end:</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24224;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tokens_begin = sentence_end;</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:24270;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consider the "Joseph's Reader" problem. </font><font style="vertical-align: inherit;">Consider the following loop:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:24302;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(uint32_t i = 0; i &lt;range_size; ++ i, ++ range_begin) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24323;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">∗ range_begin = move (permutation [i]);</font></font></nobr></div>
<div style="position:absolute;top:24343;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:24389;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Without a loop, it can be written like this:</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24421;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy (</font></font></nobr></div>
<div style="position:absolute;top:24441;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">make_move_iterator (begin (permutation)), make_move_iterator (end (permutation)),</font></font></nobr></div>
<div style="position:absolute;top:24461;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">range_begin);</font></font></nobr></div>
<div style="position:absolute;top:24482;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">);</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:24528;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The move algorithm will move data, not copy. </font><font style="vertical-align: inherit;">This will eliminate the need for you</font></font></nobr></div>
<div style="position:absolute;top:24549;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">call make_move_iterator.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24581;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">move (begin (permutation), end (permutation), range_begin);</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:24673;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.9. </font><font style="vertical-align: inherit;">Non-copyable types</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:24719;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's demonstrate how you can make a type that won't be able to copy using an example.</font></font></nobr></div>
<div style="position:absolute;top:24742;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger'a. </font><font style="vertical-align: inherit;">You need to write delete instead of the body of the copy constructor:</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24772;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Logger &amp;) = </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delete</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:24818;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are types in the language that are meaningless to copy, for example, input and output streams.</font></font></nobr></div>
<div style="position:absolute;top:24840;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's see how to handle them using a stream vector as an example.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:24871;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;ofstream&gt; streams;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:24892;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streams.reserve (5);</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:24942;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">twenty</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:25123;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="22"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 22</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:25213;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:25273;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i = 0; i &lt;5; ++ i) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25294;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ofstream stream (to_string (i) + </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">".txt"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
<div style="position:absolute;top:25314;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream &lt;&lt; </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"File #"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt;&lt; i &lt;&lt; </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"\ n"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></nobr></div>
<div style="position:absolute;top:25334;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streams.push_back (move (stream));</font></font></nobr></div>
<div style="position:absolute;top:25355;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:25375;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp; stream: streams) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25395;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stream &lt;&lt; </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Vector is ready!" </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">endl</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></nobr></div>
<div style="position:absolute;top:25416;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:25462;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's open, for example, the file "0.txt". </font><font style="vertical-align: inherit;">It is written there:</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:25494;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// File # 0</font></font></nobr></div>
<div style="position:absolute;top:25514;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Vector is ready!</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:25560;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It turned out to work with file streams, despite the fact that these are non-copyable objects.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:25645;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.10. </font><font style="vertical-align: inherit;">NRVO and copy elision</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:25691;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can optimize copying objects that have data only on the stack. </font><font style="vertical-align: inherit;">Prodemon-</font></font></nobr></div>
<div style="position:absolute;top:25713;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's try it out on the example of Logger. </font><font style="vertical-align: inherit;">Let's say we have a MakeLogger () function:</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25744;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger MakeLogger () {</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:25765;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger ();</font></font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:25765;left:261"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// temporary -&gt; temporary returned</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25785;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:25831;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With the temporary Logger () object, we initialize the intermediate object that should</font></font></nobr></div>
<div style="position:absolute;top:25853;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wives return from function. </font><font style="vertical-align: inherit;">In the main function, we are from a temporary object that returned from</font></font></nobr></div>
<div style="position:absolute;top:25874;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">functions, we initialize the variable:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:25906;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25926;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Logger logger = MakeLogger ();</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:25926;left:389"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// temporary -&gt; variable</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:25967;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:25987;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:26008;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Default ctor</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:26054;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since in both cases the new object is initialized with a temporary object, what happens</font></font></nobr></div>
<div style="position:absolute;top:26076;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moving.</font></font></nobr></div>
<div style="position:absolute;top:26130;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:26311;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="23"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 23</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:26401;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:26459;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result of the work of the code, only the default constructor was called, the constructors of the copy-</font></font></nobr></div>
<div style="position:absolute;top:26481;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rationing and displacement were not volunteered. </font><font style="vertical-align: inherit;">The fact is that in some cases the compiler can</font></font></nobr></div>
<div style="position:absolute;top:26502;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">optimize movement. </font><font style="vertical-align: inherit;">For example:</font></font></nobr></div>
<div style="position:absolute;top:26553;left:91"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• when returning from a function of a temporary object;</font></font></nobr></div>
<div style="position:absolute;top:26588;left:91"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• when initializing a new object with a temporary object.</font></font></nobr></div>
<div style="position:absolute;top:26639;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This optimization is called copy elision.</font></font></nobr></div>
<div style="position:absolute;top:26679;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When returning a local variable from a function, move and copy are omitted.</font></font></nobr></div>
<div style="position:absolute;top:26700;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This optimization is called named return value optimization.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:26785;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.11. </font><font style="vertical-align: inherit;">The dangers of return</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:26831;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consider two cases where return is not optimized as well as in the previous cases.</font></font></nobr></div>
<div style="position:absolute;top:26852;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">of the next item.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:26883;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pair </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;ifstream, ofstream&gt; MakeStreams (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> const string </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp; prefix) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:26903;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifstream input (prefix + </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">".in"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
<div style="position:absolute;top:26923;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ofstream output (prefix + </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">".out"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:26944;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{input, output};</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:26964;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:27009;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code does not compile, the compiler cannot pair the threads. </font><font style="vertical-align: inherit;">input and output are passed</font></font></nobr></div>
<div style="position:absolute;top:27030;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">are inserted into the pair constructor, then the pair created with this constructor must be</font></font></nobr></div>
<div style="position:absolute;top:27052;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">initialize the returned temporary object. </font><font style="vertical-align: inherit;">Since this pair is also temporary, then</font></font></nobr></div>
<div style="position:absolute;top:27074;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the initialization of the temporary object returned from the function by this pair occurs without</font></font></nobr></div>
<div style="position:absolute;top:27095;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is useful, but the transfer of input and output variables to the constructor of a pair occurs as usual</font></font></nobr></div>
<div style="position:absolute;top:27117;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rules of the C ++ language. </font><font style="vertical-align: inherit;">To solve the problem, you should wrap input and output in move.</font></font></nobr></div>
<div style="position:absolute;top:27157;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the function should return some object, for example an input stream:</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:27187;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifstream MakeInputStream ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const string</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &amp; prefix) {</font></font></nobr></div>
<div style="position:absolute;top:27228;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:27273;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We got a couple of objects inside the function, we can only return one of its elements.</font></font></nobr></div>
<div style="position:absolute;top:27318;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:27499;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="24"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 24</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:27589;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:27649;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ifstream MakeInputStream ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const string</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &amp; prefix) {</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:27670;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streams = MakeStreams (prefix);</font></font></font></nobr></div>
<div style="position:absolute;top:27690;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streams.first;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:27710;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:27758;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">streams.first is not a temporary object. </font><font style="vertical-align: inherit;">Also this expression is not a name</font></font></nobr></div>
<div style="position:absolute;top:27778;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">local variable is a local variable field.</font></font></nobr></div>
<div style="position:absolute;top:27818;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The problem is solved by wrapping streams in move.</font></font></nobr></div>
</span></font>
<font size="4" face="Times"><span style="font-size:23px;font-family:Times">
<div style="position:absolute;top:27906;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2. </font><font style="vertical-align: inherit;">Basic multithreading</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:27961;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.1. </font><font style="vertical-align: inherit;">async and future</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:28007;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's write a function that will add the elements of two vectors. </font><font style="vertical-align: inherit;">In single-threaded syn-</font></font></nobr></div>
<div style="position:absolute;top:28028;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chrono version, our function will look like this:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:28060;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SumToVectors (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> const vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; &amp; one,</font></font></font></nobr></div>
<div style="position:absolute;top:28080;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; &amp; two) {</font></font></font></nobr></div>
<div style="position:absolute;top:28101;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accumulate (begin (one), end (one), 0)</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:28121;left:123"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ accumulate (begin (two), end (two), 0);</font></font></nobr></div>
<div style="position:absolute;top:28141;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:28187;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At the beginning we find the sum of the elements of one vector, then the sum of the elements of another vector.</font></font></nobr></div>
<div style="position:absolute;top:28209;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We could add one vector asynchronously, add another vector at the same time</font></font></nobr></div>
<div style="position:absolute;top:28231;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with the first, then add the results. </font><font style="vertical-align: inherit;">You need a future header file:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:28263;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">#include </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;future&gt;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:28309;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We call the async function, it starts the asynchronous operation. </font><font style="vertical-align: inherit;">In this case, it returns</font></font></nobr></div>
<div style="position:absolute;top:28330;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the result of summing vector one.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:28362;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">future &lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; f = async ([] {</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:28382;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accumulate (begin (one), end (one), 0);</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:28403;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">});</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:28449;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we assign the sum of the elements of the second vector to the result variable.</font></font></nobr></div>
<div style="position:absolute;top:28506;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:28687;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="25"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 25</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:28777;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:28837;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">result = accumulate (begin (two), end (two), 0);</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:28884;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Next, we return result plus what async returns. </font><font style="vertical-align: inherit;">async returns a future.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:28915;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">result + f.get ();</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:28961;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Such code does not compile because the one variable is not captured.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:28993;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">future &lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; f = async ([&amp; one] {</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:29014;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accumulate (begin (one), end (one), 0);</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:29034;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">});</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:29080;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When we write one in square brackets of a lambda, it is copied into the lambda-</font></font></nobr></div>
<div style="position:absolute;top:29102;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">functions. </font><font style="vertical-align: inherit;">To prevent it from being copied, it should be passed by reference.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:29187;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.2. </font><font style="vertical-align: inherit;">The problem of generating and summing a matrix</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:29232;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have a matrix:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:29264;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; matrix;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:29310;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is generated using the GenerateSingleThread function:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:29342;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; GenerateSingleThread (size_t size) {</font></font></font></nobr></div>
<div style="position:absolute;top:29362;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; result (size);</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:29383;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenerateSingleThread (result, 0, size);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:29403;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">result;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:29423;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:29469;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The function calls another function, GenerateSingleThread, which is a template.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:29501;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">template </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> typename </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContainerOfVectors&gt;</font></font></font></nobr></div>
<div style="position:absolute;top:29522;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenerateSingleThread (</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:29542;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContainerOfVectors &amp; result;</font></font></nobr></div>
<div style="position:absolute;top:29562;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size_t first_row,</font></font></nobr></div>
<div style="position:absolute;top:29583;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size_t column_size</font></font></nobr></div>
<div style="position:absolute;top:29603;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) {</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:29623;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&amp; row: result) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:29643;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">row.reserve (column_size);</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:29694;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:29875;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="26"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 26</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:29965;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:30025;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(size_t column = 0; column &lt;column_size; ++ column) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30046;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">row.push_back (first_row ^ column);</font></font></nobr></div>
<div style="position:absolute;top:30066;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:30086;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">++ first_row;</font></font></nobr></div>
<div style="position:absolute;top:30107;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:30127;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:30173;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then the matrix is ​​processed using the SumSingleThread function.</font></font></nobr></div>
<div style="position:absolute;top:30213;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's run the program:</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:30245;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30265;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LOG_DURATION ( </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Total"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:30285;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size_t matrix_size = 7000;</font></font></font></nobr></div>
<div style="position:absolute;top:30326;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; matrix;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30346;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{</font></font></nobr></div>
<div style="position:absolute;top:30367;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LOG_DURATION ( </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Single thread generation"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
<div style="position:absolute;top:30387;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix = GenerateSingleThread (matrix_size);</font></font></nobr></div>
<div style="position:absolute;top:30407;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:30427;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{</font></font></nobr></div>
<div style="position:absolute;top:30448;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LOG_DURATION ( </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Single thread sum"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:30468;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; SumSingleThread (matrix) &lt;&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> endl </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30488;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:30529;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:30549;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Single thread generation: 1254 ms</font></font></nobr></div>
<div style="position:absolute;top:30570;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Single thread sum: 375 ms</font></font></nobr></div>
<div style="position:absolute;top:30590;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 195928050144</font></font></nobr></div>
<div style="position:absolute;top:30610;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Total: 1651 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:30657;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We want to speed up the program. </font><font style="vertical-align: inherit;">Let's try to generate a multi-threaded matrix. </font><font style="vertical-align: inherit;">Let's write a function</font></font></nobr></div>
<div style="position:absolute;top:30678;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenerateMultiThread. </font><font style="vertical-align: inherit;">It will accept page_size 0 - the desired page size,</font></font></nobr></div>
<div style="position:absolute;top:30700;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">which will be passed to the stream.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:30732;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; GenerateMultiThread (</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30752;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size_t size, size_t page_size</font></font></nobr></div>
<div style="position:absolute;top:30772;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) {</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:30793;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; result (size);</font></font></font></nobr></div>
<div style="position:absolute;top:30813;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">result;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:30833;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:30882;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:31063;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="27"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 27</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:31153;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:31211;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We want to split the result vector into several parts. </font><font style="vertical-align: inherit;">This is where the Paginator template comes in.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:31242;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; GenerateMultiThread (</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:31263;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size_t size, size_t page_size</font></font></nobr></div>
<div style="position:absolute;top:31283;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) {</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:31303;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; result (size);</font></font></font></nobr></div>
<div style="position:absolute;top:31324;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;future &lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> void </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;&gt; futures;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:31344;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size_t first_row = 0;</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:31364;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page: Paginate (result, page_size)) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:31384;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">futures.push_back (</font></font></nobr></div>
<div style="position:absolute;top:31405;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">async ([page, first_row, size] {</font></font></nobr></div>
<div style="position:absolute;top:31425;left:143"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenerateSingleThread (page, first_row, size);</font></font></nobr></div>
<div style="position:absolute;top:31445;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">})</font></font></nobr></div>
<div style="position:absolute;top:31466;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">);</font></font></nobr></div>
<div style="position:absolute;top:31486;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">first_row + = page_size;</font></font></nobr></div>
<div style="position:absolute;top:31506;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:31547;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">result;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:31567;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:31613;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now in main () we will call the multithreaded generator.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:31644;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{</font></font></nobr></div>
<div style="position:absolute;top:31664;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LOG_DURATION ( </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Multi thread generation"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></nobr></div>
<div style="position:absolute;top:31685;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matrix = GenerateMultiThread (matrix_size, 2000);</font></font></nobr></div>
<div style="position:absolute;top:31705;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:31746;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Single thread generation: 1229 ms</font></font></nobr></div>
<div style="position:absolute;top:31766;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Multi thread generation: 611 ms</font></font></nobr></div>
<div style="position:absolute;top:31786;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Single thread sum: 365 ms</font></font></nobr></div>
<div style="position:absolute;top:31807;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// 195928050144</font></font></nobr></div>
<div style="position:absolute;top:31827;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Total: 2345 ms</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:31873;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Multi-threaded matrix generation turned out to be twice as fast as single-threaded.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:31957;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.3. </font><font style="vertical-align: inherit;">Features of the future template</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:32003;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's pay attention to the vector futures from the GenerateMultiThread function. </font><font style="vertical-align: inherit;">We announced it, word</font></font></nobr></div>
<div style="position:absolute;top:32025;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the results of the async call lived in it and were not called again. </font><font style="vertical-align: inherit;">By saving the results to a vector,</font></font></nobr></div>
<div style="position:absolute;top:32070;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:32251;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="28"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 28</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:32341;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:32399;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">we defer calling their destructor, which calls get (). </font><font style="vertical-align: inherit;">If the call result</font></font></nobr></div>
<div style="position:absolute;top:32421;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Async functions are not stored in a variable, then the program can be executed sequentially.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:32506;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.4. </font><font style="vertical-align: inherit;">Race condition</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:32552;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's develop the Account class:</font></font></nobr></div>
<div style="position:absolute;top:32606;left:91"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• It represents a bank account;</font></font></nobr></div>
<div style="position:absolute;top:32643;left:91"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• Should not allow spending more money than there is in the account;</font></font></nobr></div>
<div style="position:absolute;top:32679;left:91"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">• Should not allow the account balance to become negative.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:32726;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">struct </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Account {</font></font></font></nobr></div>
<div style="position:absolute;top:32746;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">balance = 0;</font></font></font></nobr></div>
<div style="position:absolute;top:32787;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bool </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spend (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value) {</font></font></font></nobr></div>
<div style="position:absolute;top:32807;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(value &lt;= balance) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:32828;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">balance - = value;</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:32848;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return true </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:32868;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:32889;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return false </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:32909;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">};</font></font></nobr></div>
<div style="position:absolute;top:32929;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">};</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:32975;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's write a function that will try to spend one ruble 100,000 times. </font><font style="vertical-align: inherit;">She returns</font></font></nobr></div>
<div style="position:absolute;top:32997;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the amount of money spent.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:33029;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SpendMoney (Account &amp; account) {</font></font></font></nobr></div>
<div style="position:absolute;top:33049;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">total_spent = 0;</font></font></font></nobr></div>
<div style="position:absolute;top:33069;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i = 0; i &lt;100000; ++ i) {</font></font></font></nobr></div>
<div style="position:absolute;top:33090;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(account.Spend (1)) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33110;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">++ total_spent;</font></font></nobr></div>
<div style="position:absolute;top:33130;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:33151;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:33171;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">total_spent;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33191;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:33258;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:33439;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="29"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 29</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:33529;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:33589;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33610;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Account my_account (100000);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:33650;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Total spent:" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; SpendMoney (my_account)</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33671;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Balance:"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt;&lt; my_account.balance &lt;&lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">endl</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></nobr></div>
<div style="position:absolute;top:33691;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:33711;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Total spent: 100000</font></font></nobr></div>
<div style="position:absolute;top:33732;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Balance: 0</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:33778;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now let a few people spend money from the family account asynchronously.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:33810;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">main () {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33830;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Account family_account (100000);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:33871;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">husband</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33871;left:221"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= async (SpendMoney, ref (family_account));</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:33891;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wife</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33891;left:221"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= async (SpendMoney, ref (family_account));</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:33911;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33911;left:221"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= async (SpendMoney, ref (family_account));</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:33932;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auto </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">daughter = async (SpendMoney, ref (family_account));</font></font></font></nobr></div>
<div style="position:absolute;top:33972;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">spent = husband.get () + wife.get () + son.get ()</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:33993;left:123"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ daughter.get ();</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:34033;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cout </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; </font></font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Total spent:" </font></font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; spent &lt;&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> endl</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:34054;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;&lt; </font></font><font color="#9400d1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Balance:"</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt;&lt; family_account.balance &lt;&lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">endl</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></nobr></div>
<div style="position:absolute;top:34074;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:34094;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Total spent: 140573</font></font></nobr></div>
<div style="position:absolute;top:34114;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Balance: 0</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:34161;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The family spent more money than was originally in the account.</font></font></nobr></div>
<div style="position:absolute;top:34200;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If multiple threads access the same variable, data integrity can</font></font></nobr></div>
<div style="position:absolute;top:34222;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">be broken. </font><font style="vertical-align: inherit;">The Account class maintained the invariant: balance never becomes negative</font></font></nobr></div>
<div style="position:absolute;top:34244;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">we cannot spend more than we have in the account. </font><font style="vertical-align: inherit;">This invariant was violated when</font></font></nobr></div>
<div style="position:absolute;top:34265;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">simultaneous access to data. </font><font style="vertical-align: inherit;">This is the data race. </font><font style="vertical-align: inherit;">To avoid it</font></font></nobr></div>
<div style="position:absolute;top:34287;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it is necessary to synchronize access to data from multiple threads.</font></font></nobr></div>
<div style="position:absolute;top:34446;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">28</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:34627;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="30"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 30</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:34717;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:34773;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.5. </font><font style="vertical-align: inherit;">mutex and lock_guard</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:34819;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's add to our class Account vector &lt;int&gt; history, which will save all transactions.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:34851;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">struct </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Account {</font></font></font></nobr></div>
<div style="position:absolute;top:34871;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">balance = 0;</font></font></font></nobr></div>
<div style="position:absolute;top:34892;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; history;</font></font></font></nobr></div>
<div style="position:absolute;top:34932;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bool </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spend (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value) {</font></font></font></nobr></div>
<div style="position:absolute;top:34953;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(value &lt;= balance) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:34973;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">balance - = value;</font></font></nobr></div>
<div style="position:absolute;top:34993;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">history.push_back (value);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:35014;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return true </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:35034;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:35054;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return false </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:35075;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">};</font></font></nobr></div>
<div style="position:absolute;top:35095;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">};</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:35141;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The current code needs to be adapted for multiple threads using Mutex (MUTual</font></font></nobr></div>
<div style="position:absolute;top:35164;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EXclusion). </font><font style="vertical-align: inherit;">A simple example of a mutex is an intersection.</font></font></nobr></div>
<div style="position:absolute;top:35634;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">29</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:35815;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="31"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 31</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:35905;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
<div style="position:absolute;top:35963;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The mutex protects the critical section. </font><font style="vertical-align: inherit;">In programming, this is the piece of code that</font></font></nobr></div>
<div style="position:absolute;top:35985;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no more than one thread can be executing at any given time.</font></font></nobr></div>
<div style="position:absolute;top:36377;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's apply a mutex in our program. </font><font style="vertical-align: inherit;">Let's include the header file mutex. </font><font style="vertical-align: inherit;">In the Account class</font></font></nobr></div>
<div style="position:absolute;top:36399;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">declare the field</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:36430;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mutex m;</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:36475;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The critical section in our code is the Spend method. </font><font style="vertical-align: inherit;">It needs to be protected with a mutex.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:36506;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bool </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spend (</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> int </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">value) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:36526;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lock_guard &lt;mutex&gt; g (m);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:36547;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(value &lt;= balance) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:36567;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">balance - = value;</font></font></nobr></div>
<div style="position:absolute;top:36587;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">history.push_back (value);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:36608;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return true </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:36628;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:36648;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return false </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:36669;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">};</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:36714;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The program now works correctly:</font></font></nobr></div>
</span></font>
<font size="3" color="#009900" face="Times"><span style="font-size:14px;font-family:Times;color:#009900">
<div style="position:absolute;top:36745;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Total spent: 100000</font></font></nobr></div>
<div style="position:absolute;top:36765;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">// Balance: 0</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:36822;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">thirty</font></font></nobr></div>
</span></font>

<div style="position:absolute;top:37003;left:0"><hr><table border="0" width="100%"><tbody><tr><td bgcolor="eeeeee" align="right"><font face="arial,sans-serif"><a name="32"><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page 32</font></font></b></a></font></td></tr></tbody></table></div><font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:37093;left:247"><nobr><font style="vertical-align: inherit;"><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;">C ++ Development Fundamentals: Red Belt</font></a></font><font style="vertical-align: inherit;"> Course</font></font><font color="#3b98db"><a href="https://translate.google.com/translate?hl=en&amp;prev=_t&amp;sl=ru&amp;tl=en&amp;u=https://www.coursera.org/learn/c-plus-plus-red/home/welcome"><font style="vertical-align: inherit;"></font></a></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:19px;font-family:Times">
<div style="position:absolute;top:37149;left:64"><nobr><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.6. </font><font style="vertical-align: inherit;">&lt;execution&gt; that doesn't exist</font></font></b></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:37195;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's go back to the example with the generation and summation of matrix elements. </font><font style="vertical-align: inherit;">Let's change the implementation</font></font></nobr></div>
<div style="position:absolute;top:37217;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenerateSingleThread functions. </font><font style="vertical-align: inherit;">Let's replace the for loop with the for_each algorithm. </font><font style="vertical-align: inherit;">In essence it does</font></font></nobr></div>
<div style="position:absolute;top:37239;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">same.</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:37270;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">void </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GenerateSingleThread (</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:37291;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ContainerOfVectors &amp; result;</font></font></nobr></div>
<div style="position:absolute;top:37311;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size_t first_rod,</font></font></nobr></div>
<div style="position:absolute;top:37331;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size_t column_size</font></font></nobr></div>
<div style="position:absolute;top:37352;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) {</font></font></nobr></div>
<div style="position:absolute;top:37372;left:85"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for_each (</font></font></nobr></div>
<div style="position:absolute;top:37392;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">begin (result),</font></font></nobr></div>
<div style="position:absolute;top:37413;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">end (result),</font></font></nobr></div>
<div style="position:absolute;top:37433;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[&amp; first_row, column_size] ( </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vector</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt; </font></font><font color="#0000ff"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">int</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &gt; &amp; row) {</font></font></nobr></div>
<div style="position:absolute;top:37453;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">row.reverse (column_size);</font></font></nobr></div>
</span></font>
<font size="3" color="#0000ff" face="Times"><span style="font-size:14px;font-family:Times;color:#0000ff">
<div style="position:absolute;top:37474;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><font color="#000000"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(size_t column = 0; column &lt;column_size; ++ column) {</font></font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:37494;left:143"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">row.push_back (first_row ^ column);</font></font></nobr></div>
<div style="position:absolute;top:37514;left:123"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:37535;left:124"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">++ first_row;</font></font></nobr></div>
<div style="position:absolute;top:37555;left:104"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
<div style="position:absolute;top:37575;left:84"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">);</font></font></nobr></div>
<div style="position:absolute;top:37596;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">}</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:37642;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The C ++ 17 standard introduced parallel versions of standard algorithms. </font><font style="vertical-align: inherit;">In order to</font></font></nobr></div>
<div style="position:absolute;top:37663;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to obtain a parallel version of the for_each algorithm, just connect the header file</font></font></nobr></div>
<div style="position:absolute;top:37687;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">execution and specify execution :: par as the first parameter in the function.</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:14px;font-family:Times">
<div style="position:absolute;top:37717;left:65"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for_each (execution :: par, ...)</font></font></nobr></div>
</span></font>
<font size="3" face="Times"><span style="font-size:15px;font-family:Times">
<div style="position:absolute;top:37763;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">None of the leading compilers at the time of recording the video (April 2018) have implemented a sub-</font></font></nobr></div>
<div style="position:absolute;top:37785;left:64"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">support of parallel versions of algorithms. </font><font style="vertical-align: inherit;">Now this cannot be used.</font></font></nobr></div>
<div style="position:absolute;top:38010;left:450"><nobr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31</font></font></nobr></div>
</span></font>


<script>_addload(function(){_setupIW('com');_csi('ru','en','wee5.pdf');});</script>
            <script>
              function gtElInit() {
                var lib = new google.translate.TranslateService();
                lib.setCheckVisibility(false);
                lib.translatePage('ru', 'en', function (progress, done, error) {
                  if (progress == 100 || done || error) {
                    document.getElementById("gt-dt-spinner").style.display = "none";
                  }
                });
              }
            </script>
            <script src="./C ++ Development Fundamentals_ Red Belt_files/f.txt">
            </script><div id="goog-gt-tt" class="goog-tooltip skiptranslate" dir="ltr" style="visibility: hidden; left: 127px; top: 24029px; display: none;"><div style="padding: 8px;"><div><div class="logo"><img src="./C ++ Development Fundamentals_ Red Belt_files/translate_24dp.png" width="20" height="20" alt="Google Translate"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text">Используя make_move_iterator, можем заменить этот кусок...</div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none; opacity: 0;"></div></div>
          <div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>